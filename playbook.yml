# - name: Azure CLI playbook
#   hosts: azure_host
#   vars_files:
#     - azure-keyvault/azure-config.yml
#   tasks:
#   - name: Az login with service principal
#     command: 'az login --service-principal -u {{ application_id }} -t {{ tenant_id }} -p {{ client_secret }}'
#     register: user

#   - debug:
#       msg: "user: {{ user.stdout_lines }}"

# - name: Jenkins playbook
#   hosts: jenkins_install_group
#   become: yes
#   roles:
#     - install_jenkins

# - name: Docker playbook
#   hosts: docker_install_group
#   become: yes
#   roles:
#     - install_docker

# - name: GitLab playbook
#   hosts: gitlab_install_group
#   become: yes
#   roles:
#     - install_gitlab

# - name: Nexus playbook
#   hosts: nexus_install_group
#   vars_files:
#     - roles/install_nexus/vars/azurekeyvault_secret.yml
#   become: yes
#   roles:
#     - install_nexus
#   handlers:
#     - import_tasks: roles/install_nexus/handlers/handlers_service.yml

- name: SonarQube playbook
  hosts: sonarqube_install_group
  vars:
    ansible_python_interpreter: /usr/bin/python3
  vars_files:
    - roles/install_sonarqube/vars/azurekeyvault_secret.yml
  become: yes
  roles:
    - install_sonarqube
  handlers:
    - import_tasks: roles/install_sonarqube/handlers/handlers_service.yml



